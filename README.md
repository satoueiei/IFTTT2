# README.md

## 1. はじめに

このBotは、あなたが気になるTwitterアカウントの新しいツイートを、あなたのDiscordサーバーの指定チャンネルに自動でお知らせしてくれる便利なツールです。

設定はBotとのダイレクトメッセージ(DM)で行うので、他の人に見られる心配はありません。

招待URL:https://discord.com/oauth2/authorize?client_id=1360478599127371967&permissions=2176&integration_type=0&scope=bot

**【重要】利用にはあなた自身のTwitterアカウントの認証情報(Cookie)が必要です。設定手順と注意点をよく読んでご利用ください。**

## 2. できること

*   **特定のTwitterアカウントを追跡:** あなたが指定した公開Twitterアカウント（1つだけ）の新しいツイートを監視します。
*   **新着ツイートをDiscordに通知:** 新しいツイート（リツイートを除く）が見つかると、内容、画像、いいね数、RT数を指定したDiscordチャンネルにWebhook経由で投稿します。
*   **追跡ON/OFF:** BotにDMを送るだけで、ツイートの追跡を一時停止したり再開したりできます。

## 3. 導入方法

1.  **Botを招待:** Botの管理者（このBotを提供している人）から教わった招待URLをクリックします。
2.  **サーバーを選択:** Botを追加したいあなたのDiscordサーバーを選び、「認証」をクリックします。
3.  **権限の確認:** Botが必要とする権限（メッセージ送信、埋め込みリンクなど）を確認し、「認証」ボタンを押します。
4.  サーバーにBotが参加すれば導入完了です！

## 4. 初期設定 (`!setup` コマンド)

**⚠️ この設定は、必ずBotへの【ダイレクトメッセージ (DM)】で行ってください！ ⚠️**
サーバーのチャンネルで設定しようとすると、他の人に情報が見えてしまう危険があります。

設定には、**あなたのTwitterアカウントのCookie情報**、**追跡したいTwitterアカウントのスクリーンネーム**、**通知を送りたいDiscordチャンネルのWebhook URL** が必要です。

**手順:**

1.  **BotにDM:** サーバーに参加したBotのアイコンをクリックし、「メッセージ」を送るなどしてDM画面を開き、`!setup` と入力して送信します。

2.  **ステップ 1/3: Cookie情報の入力**
    *   BotからTwitter Cookieの入力が求められます。これは、BotがあなたのアカウントとしてTwitterの情報を取得するために必要です。
    *   **Cookieの取得方法 (推奨: EditThisCookie拡張機能):**
        1.  **PCのWebブラウザ** (Chrome, Firefoxなど) で、普段使っているTwitterアカウント (x.com) に**ログイン**します。
        2.  ブラウザに **[EditThisCookie(V3)](https://chromewebstore.google.com/detail/editthiscookie-v3/ojfebgpkimhlhcblbalbfjblapadhbol)** という拡張機能をインストールします。
        3.  Twitterを開いた状態で、EditThisCookieのアイコンをクリックします。
        4.  エクスポートボタン（[→のような右向き矢印アイコン）をクリックし、内容をコピーします。
        5.  中身をペーストしたテキストファイルを、`cookies.json`として保存し、そのままBotとの**DMにファイルを添付して送信**します。
    *   **🚨【超重要】セキュリティに関する警告とお願い 🚨**
        *   **Cookieはあなたのアカウントの鍵のようなものです。** これを他人に知られると、あなたのアカウントが乗っ取られる危険があります。
        *   このBotはあなたのCookieを暗号化して保存しますが、**絶対に信頼できないBotにはCookie情報を提供しないでください。**
        *   **Cookie情報をDiscordの公開チャンネルなどに貼り付けるのは絶対にやめてください！**
        *   Cookie情報が古くなったり、パスワードを変更したりすると、Botは動作しなくなります。その場合は再度 `!setup` が必要です。
        *   **Cookie情報の利用は自己責任となります。** 万が一、アカウントに問題が発生した場合でも、Bot開発者および管理者は責任を負いかねます。

3.  **ステップ 2/3: 追跡対象のスクリーンネーム入力**
    *   Botから「追跡したいTwitterユーザーのスクリーンネームを入力してください」と聞かれます。
    *   監視したいTwitterアカウントの `@` から始まるユーザー名（例: `@discord`）または `@` を除いた名前（例: `discord`）を入力して送信します。
    *   **注意:** 一度に追跡できるアカウントは1つだけです。

4.  **ステップ 3/3: Webhook URLの入力**
    *   Botから「通知を送りたいDiscord WebhookのURLを入力してください」と聞かれます。
    *   **Webhook URLの取得方法:**
        1.  通知を受け取りたいDiscordサーバーの**テキストチャンネル**にカーソルを合わせ、右側に出る歯車アイコン⚙️（チャンネル設定）をクリックします。
        2.  左側のメニューから「連携サービス」を選びます。
        3.  「ウェブフックを作成」ボタンをクリックします。（もしWebhookが既にあれば、それを選んでもOKです）
        4.  Webhookの名前を自由につけ（例: Twitter通知用）、アイコンも設定できます。
        5.  **「ウェブフックURLをコピー」** ボタンをクリックします。
        6.  **【重要】このWebhook URLも他人に知られないようにしてください。**
    *   コピーしたWebhook URLを、BotとのDMに貼り付けて送信します。

5.  **設定完了！**
    *   「設定が完了しました！」とメッセージが表示されたらOKです。
    *   設定したTwitterアカウントの新しいツイートが、指定したチャンネルに投稿されるようになります。（最初の通知まで最大15分ほどかかる場合があります）
    *   **設定を変更したい場合:** 再度 `!setup` をDMで実行してください。古い設定は新しい設定で**上書き**されます。

## 5. 使い方

### 追跡の一時停止 / 再開 (`!track_toggle` コマンド)

**BotへのDMで実行してください。**

*   通知が多すぎると感じた時や、一時的に追跡を止めたい場合は、BotにDMで `!track_toggle` と送信してください。
*   Botが「追跡を無効にしました」と返信します。
*   再度通知を受け取りたい場合は、もう一度 `!track_toggle` と送信すれば「追跡を有効にしました」と返信があり、追跡が再開されます。

## 6. 困ったときは (Q&A)

*   **Q. 通知がまったく来ないんだけど？**
    *   **A1.** Botはオンラインですか？ DiscordのメンバーリストでBotがオフラインになっていないか確認してください。
    *   **A2.** `!track_toggle` で追跡が無効になっていませんか？ DMで `!track_toggle` を試してみてください。
    *   **A3.** Twitterのパスワードを変更したり、長期間ログインしていなかったりしませんでしたか？ Cookie情報が無効になっている可能性があります。お手数ですが、再度 `!setup` を実行し、最新のCookie情報を設定し直してみてください。（BotからDMでCookieエラーの通知が届いている場合もあります）
    *   **A4.** Webhook URLは有効ですか？ 通知先に指定したDiscordチャンネルの設定でWebhookが削除されていないか、URLが変わっていないか確認してください。
    *   **A5.** 追跡対象のアカウントが最近ツイートしていますか？ Botは新しいツイートがない場合は通知しません。
*   **Q. `!setup` が途中でうまくいかない。**
    *   **A.** エラーメッセージをよく読んでください。CookieのJSON形式が間違っている、スクリーンネームが存在しない、Webhook URLの形式が違う、などの原因が考えられます。手順をよく確認し、もう一度試してみてください。タイムアウト（返信待ち時間）にも注意してください。
*   **Q. BotからエラーっぽいDMが届いたんだけど？**
    *   **A.** Cookieが無効になったり、Webhook URLに送信できなくなったりした場合、BotはDMでエラーをお知らせすることがあります。メッセージの内容に従って、`!setup` で設定を修正してください。

## 7. 利用上の注意
*   **認証について:** このBotは現在、なめころりⅡ世の許諾を受けたユーザーにのみ機能を提供しております。
*   **Twitterの仕様変更:** Twitter (X) の仕様やAPIが変更されると、Botが予期せず動作しなくなる可能性があります。
*   **Cookieの有効性:** Cookieは永久に使えるものではありません。定期的に（特にパスワード変更後など）`!setup` で更新が必要になる場合があります。
*   **API制限:** 短時間に大量のツイートがあった場合など、TwitterやDiscordの利用制限により、一時的に通知が遅れたり、失敗したりすることがあります。
*   **自己責任での利用:** Cookie情報の提供を含む、Botの利用は自己責任でお願いします。利用によって生じたいかなる損害についても、Bot開発者および管理者は責任を負いかねます。
